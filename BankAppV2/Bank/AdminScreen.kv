#:import utils kivy.utils
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition
<AdminScreen@Screen>:
    name: "admin_screen"

    BoxLayout:
        id: main_win
        orientation: 'vertical'
        spacing: 2
        canvas.before:
            Color:
                rgba: (.91,.91,.91,1)
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            id: top_nav
            size_hint_y: None
            height: 30
            canvas.before:
                Color:
                    rgb: utils.get_color_from_hex('#062f4f')
                Rectangle:
                    size: self.size
                    pos: self.pos

            Label:
                text: 'Administrator Dashboard'
                bold: True
                size_hint: (.9, None)
                height: 30
                padding: 3,3
            FlatButton:
                id: file_trigger
                text: 'Logout'
                #text: 'File'
                #on_release: file_dropdown.open(self)
                size_hint: (.1, None)
                on_release: root.logout()
                height: 30
                canvas.before:
                    Color:
                        rgb: utils.get_color_from_hex('#031424')
                    Rectangle:
                        size: self.size
                        pos: self.pos
        BoxLayout:
            id: content_nav

            BoxLayout:
                id: nav_tabs
                size_hint_x: None
                width: 175
                orientation: 'vertical'
                spacing: 5
                canvas.before:
                    Color:
                        rgb: utils.get_color_from_hex('#062f4f')
                    Rectangle:
                        size: self.size
                        pos: self.pos
                ToggleButton:
                    id: user_toggle
                    text: 'Create Account'
                    #size_hint_y: .1
                    size_hint_y: None
                    height: 50
                    state: 'down'
                    background_color: (0.044, 0.204, 0.51,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                ToggleButton:
                    id: add_account_toggle
                    text: 'Manage Accounts'
                    #size_hint_y: .1
                    size_hint_y: None
                    height: 50
                    background_color: (0.044, 0.204, 0.51,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                # ToggleButton:
                #     id: delete_account_toggle
                #     text: 'Delete Account'
                #     #size_hint_y: .1
                #     size_hint_y: None
                #     height: 50
                #     background_color: (0.044, 0.204, 0.51,1)
                #     background_normal: ''
                #     group: 'admin_navs'
                #     on_state: root.change_screen(self)
                Label:
                    id: sp
                    text: ''
                    size_hint_y: .7
            BoxLayout:
                id: all_content
                padding: 20,10
                ScreenManager:
                    id: screen_manager
                    Screen:
                        id: add_user_screen
                        name: 'add_user_screen'
                        BoxLayout:
                            layout: 'vertical'
                            spacing: 10
                            BoxLayout:
                                orientation: 'vertical'
                                spacing: 40
                                # BoxLayout:
                                #     orientation: 'horizontal'
                                #     size_hint_y: None
                                #     height: 30
                                #     Button:
                                #         text: 'Back'
                                #         size_hint_x: .2
                                #         on_release: root.BackToAdminScreen()
                                Label:
                                    text: 'User Details'
                                    size_hint_y: None
                                    height: 30
                                    canvas.before:
                                        Color:
                                            rgba: (0.30,0.30,0.30,1)
                                        Rectangle:
                                            size: self.size
                                            pos: self.pos
                                BoxLayout:
                                    orientation: 'vertical'
                                    spacing: 20
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: 5
                                        Label:
                                            text: 'First Name'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: firstName
                                            hint_text: 'first name'
                                            multiline: False
                                            write_tab: False
                                        Label:
                                            text: 'Last Name'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: lastName
                                            hint_text: 'last name'
                                            multiline: False
                                            write_tab: False
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: 5
                                        Label:
                                            text: 'Street Address'
                                            size_hint_x: .25
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: streetAddress
                                            hint_text: 'Address'
                                            size_hint_x: .75
                                            multiline: False
                                            write_tab: False
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: 5
                                        Label:
                                            text: 'City'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: city
                                            hint_text: 'City'
                                            multiline: False
                                            write_tab: False
                                        Label:
                                            text: 'State'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: state
                                            hint_text: 'State'
                                            multiline: False
                                            write_tab: False
                                        Label:
                                            text: 'Zip Code'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: zipcode
                                            hint_text: 'Zip Code'
                                            multiline: False
                                            write_tab: False
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: 5
                                        Label:
                                            text: 'Email'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        # TextInput:
                                        #     id: email
                                        #     hint_text: 'Email'
                                        #     multiline: False
                                        #     write_tab: False
                                        TextInput:
                                            id: email
                                            hint_text: 'email@domain.com'
                                        Label:
                                            text: 'Phone #'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: phoneNumber
                                            hint_text: '0001112222'
                                            multiline: False
                                            write_tab: False
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: 5
                                        Label:
                                            text: 'Account Type'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        Spinner:
                                            id: accountType
                                            text: 'Select Account'
                                            #size_hint_x: .6
                                            values: ('Admin', 'Teller', 'Customer')
                                            #background_color: 0.024, 0.184, 0.31, 1
                                        Label:
                                            text: 'SSN'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: ssn
                                            hint_text: '000112222'
                                            password: True
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: 5
                                        Label:
                                            text: 'username'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: newUsername
                                            hint_text: 'username'
                                            multiline: False
                                            write_tab: False
                                        Label:
                                            text: 'Password'
                                            canvas.before:
                                                Color:
                                                    rgba: (0.60,0.60,0.60,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                        TextInput:
                                            id: newPassword
                                            hint_text: 'password'
                                            password: True
                                            multiline: False
                                            write_tab: False
                                BoxLayout:
                                    orientation: 'vertical'
                                    spacing: 20
                                    size_hint_y: .2
                                    Label:
                                        text: ''
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        spacing: 30
                                        padding_x: 30
                                        size_hint_y: None
                                        height: 45
                                        Button:
                                            text: 'Clear'
                                            on_release: root.ClearDetails()
                                        Button:
                                            text: 'Next'
                                            on_release:
                                                root.FinishAddUser()
                                                root.ClearDetails()
                                    Label:
                                        text: ''
                    Screen:
                        id: user_screen
                        name: 'user_screen'
                        BoxLayout:
                            orientation: 'vertical'
                            spacing: 10
                            #BoxLayout:
                                #id: scrn_contents
                            
                            # Label:
                            #     text: 'List headers here'
                            #     spacing: 10
                            #     size_hint_y: None
                            #     height: 35
                            #     canvas.before:
                            #         Color:
                            #             rgba: (0.6,0.6,0.6,1)
                            #         Rectangle:
                            #             size: self.size
                            #             pos: self.pos
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: .2
                                Label:
                                    text: ''
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 10
                                    size_hint_y: None
                                    height: 45
                                    #height: 35
                                    Label:
                                        text: ''
                                        size_hint_x: .2
                                    TextInput:
                                        id: lookup_customer
                                        size_hint_x: .4
                                        hint_text: 'SSN'
                                        multiline: False
                                    Button:
                                        id: lookup_customer_button
                                        size_hint_x: .2
                                        text: 'search'
                                        on_release:
                                            root.SetCurrentCustomer(root.ids.lookup_customer.text)
                                            app.get_info()
                                    Label:
                                        text: ''
                                        size_hint_x: .2
                                BoxLayout:
                                    orientation: 'horizontal'
                                    Label:
                                        text: ''
                                        size_hint_x: .2
                                    Label:
                                        id: customerName
                                        text: "Name goes here"
                                        canvas.before:
                                            Color:
                                                rgba: (0.6,0.6,0.6,1)
                                            Rectangle:
                                                size: self.size
                                                pos: self.pos
                                    Label:
                                        text: ''
                                        size_hint_x: .2
                            # Label:
                            #     id: customer_search_label_admin
                            #     text: 'Status stuff here'
                            #     size_hint_y: .5
                            #     canvas.before:
                            #         Color:
                            #             rgba: (0.70,0.70,0.70,1)
                            #         Rectangle:
                            #             size: self.size
                            #             pos: self.pos
                        # SelectableButton:
                        #     # Draw a background to indicate selection
                        #     canvas.before:
                        #         Color:
                        #             rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
                        #         Rectangle:
                        #             pos: self.pos
                        #             size: self.size
                            RV:
                                id: rv
                                BoxLayout:
                                    orientation: "vertical"

                                    GridLayout:
                                        size_hint: 1, None
                                        size_hint_y: None
                                        height: 25
                                        cols: 3
                                        canvas.before:
                                            Color:
                                                rgba: (0.3,0.3,0.4,1)
                                            Rectangle:
                                                size: self.size
                                                pos: self.pos
                                        Label:
                                            text: "User ID"
                                        Label:
                                            text: "User Name"
                                    BoxLayout:
                                        RecycleView:
                                            viewclass: 'SelectableButton'
                                            data: [{'text': str(x)} for x in app.data_items]
                                            canvas.before:
                                                Color:
                                                    rgba: (0.3,0.3,0.7,1)
                                                Rectangle:
                                                    size: self.size
                                                    pos: self.pos
                                            SelectableRecycleGridLayout:
                                                cols: 1
                                                default_size: None, dp(56)
                                                default_size_hint: 1, None
                                                size_hint_y: None
                                                height: self.minimum_height
                                                orientation: 'vertical'
                                                multiselect: True
                                                touch_multiselect: True
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: .3
                                Label:
                                    text: ''
                                BoxLayout:
                                    id: ops_btns
                                    spacing: 30
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: ''
                                        size_hint_x: .2
                                    Button:
                                        id: crud_add
                                        text: 'Add Account'
                                        on_release: root.FinishAddUser()
                                    Label:
                                        text: ''
                                        size_hint_x: .1
                                    Button:
                                        id: crud_remove
                                        text: 'Remove Account'
                                    Label:
                                        text: ''
                                        size_hint_x: .2
                                Label:
                                    text: ''
                    Screen:
                        id: add_account_screen
                        name: 'add_account_screen'
                        BoxLayout:
                            orientation: 'vertical'
                            spacing: 10
                            Label:
                                id: account_label
                                text: "Add a new account."
                                size_hint_y: None
                                height: 45
                                canvas.before:
                                    Color:
                                        rgba: (0.7,0.7,0.7,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                            BoxLayout:
                                orientation: 'vertical'
                                spacing: 15
                                padding: add_account_screen.x-75, 100
                                canvas.before:
                                    Color:
                                        rgba: (0.8,0.8,0.8,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                                Label:
                                    text: ''

                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: 'Account type:'
                                        size_hint_x: .4
                                        color: .2, .2, .2, 1
                                        # canvas.before:
                                        #     Color:
                                        #         rgba: (0.5,0.5,0.5,1)
                                        #     Rectangle:
                                        #         size: self.size
                                        #         pos: self.pos
                                    Spinner:
                                        id: newAccountType
                                        text: 'Select Account'
                                        size_hint_x: .6
                                        values: ('Regular checking', 'Savings', 'Money Market', 'Home Mortgage Loan', 'Credit Card')
                                        background_color: 0.024, 0.184, 0.31, 1
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: 'Starting balance: '
                                        size_hint_x: .4
                                        color: .2, .2, .2, 1
                                        # canvas.before:
                                        #     Color:
                                        #         rgba: (0.5,0.5,0.5,1)
                                        #     Rectangle:
                                        #         size: self.size
                                        #         pos: self.pos
                                    TextInput:
                                        id: startingBalance
                                        size_hint_x: .6
                                        hint_text: '$'
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: ''
                                        size_hint_x: .6
                                    Button:
                                        text: 'Add Account'
                                        size_hint_x: .4
                                        on_release: root.AddAccount()
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Button:
                                        text: 'Finish'
                                        size_hint_x: .5
                                        on_release: 
                                            screen_manager.current = 'user_screen'
                                            root.ResetAddAccountScreen()
                                Label:
                                    text: ''
                    # Screen:
                    #     id: delete_account_screen
                    #     name: 'delete_account_screen'
                    #     BoxLayout:
                    #         orientation: 'vertical'
                    #         spacing: 10
                    #         Label:
                    #             id: account_label
                    #             text: "Delete an existing account."
                    #             size_hint_y: None
                    #             height: 45
                    #             canvas.before:
                    #                 Color:
                    #                     rgba: (0.7,0.7,0.7,1)
                    #                 Rectangle:
                    #                     size: self.size
                    #                     pos: self.pos
                    #         BoxLayout:
                    #             orientation: 'vertical'
                    #             spacing: 15
                    #             padding: add_account_screen.x-75, 100
                    #             canvas.before:
                    #                 Color:
                    #                     rgba: (0.8,0.8,0.8,1)
                    #                 Rectangle:
                    #                     size: self.size
                    #                     pos: self.pos
                    #             Label:
                    #                 text: ''

                    #             BoxLayout:
                    #                 orientation: 'horizontal'
                    #                 spacing: 20
                    #                 size_hint_y: None
                    #                 height: 45
                    #                 Label:
                    #                     text: 'Existing account:'
                    #                     size_hint_x: .4
                    #                     color: .2, .2, .2, 1
                    #                     # canvas.before:
                    #                     #     Color:
                    #                     #         rgba: (0.5,0.5,0.5,1)
                    #                     #     Rectangle:
                    #                     #         size: self.size
                    #                     #         pos: self.pos
                    #                 Spinner:
                    #                     text: 'Select Account'
                    #                     size_hint_x: .6
                    #                     values: ('Regular checking 1', 'Savings 1', 'Credit Card 1', 'Credit Card 2')
                    #                     background_color: 0.024, 0.184, 0.31, 1
                    #             BoxLayout:
                    #                 orientation: 'horizontal'
                    #                 spacing: 20
                    #                 size_hint_y: None
                    #                 height: 45
                    #                 Label:
                    #                     text: 'Current account balance:'
                    #                     size_hint_x: .4
                    #                     color: .2, .2, .2, 1
                    #                     # canvas.before:
                    #                     #     Color:
                    #                     #         rgba: (0.5,0.5,0.5,1)
                    #                     #     Rectangle:
                    #                     #         size: self.size
                    #                     #         pos: self.pos
                    #                 TextInput:
                    #                     disabled: True
                    #                     size_hint_x: .6
                    #                     hint_text: '$'
                    #             BoxLayout:
                    #                 orientation: 'horizontal'
                    #                 spacing: 20
                    #                 size_hint_y: None
                    #                 height: 45
                    #                 Label:
                    #                     text: ''
                    #                     size_hint_x: .6
                    #                 Button:
                    #                     text: 'Continue'
                    #                     size_hint_x: .4
                    #             Label:
                    #                 text: ''
                    
        BoxLayout:
            id: status_bar
            orientation: 'horizontal'
            size_hint_y: None
            height: 30
            canvas.before:
                Color:
                    rgb: utils.get_color_from_hex('#062f4f')
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                text: 'Status: '
                size_hint: (.25, None)
                height: 30
            Label:
                id: status_text
                text: 'Teller Name '
                size_hint: (.25, None)
                height: 30
            Label:
                text: 'Current customer: '
                size_hint: (.25, None)
                height: 30
            Label:
                id: current_customer_status_bar
                text: 'Customer name '
                size_hint: (.25, None)
                height: 30