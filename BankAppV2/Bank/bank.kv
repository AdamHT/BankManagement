#: import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import utils kivy.utils

<FlatButton@ButtonBehavior+Label>:
    text: 'default'

ScreenManagement:
    id: sm
    LoginScreen:
    AdminScreen:
    TellerScreen:

<LoginScreen>:
    name: "login_screen"
    id: login_page
    orientation: "vertical"
    spacing: 10
    space_x: self.size[0]/3

    BoxLayout:
        orientation: "vertical"
        #spacing: 20
        padding: login_page.space_x, 10
        canvas.before:
            Color:
                rgba: (0.761,0.761,0.761,1)
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            text: "Financial Way"
            font_size: 90
            font_name: "DejaVuSans"
        BoxLayout:
            orientation: "vertical"
            spacing: 10
            size_hint_y: None
            height: 100
            Spinner:
                id: account_type
                text: 'Account Type'
                values: ('Admin', 'Teller')
                background_color: 0.2, 0.2, 0.8, 1
            TextInput:
                id: username
                multiline: False
                write_tab: False
                hint_text: "Username"
            TextInput:
                id: password
                password: True # hide password
                multiline: False
                write_tab: False
                hint_text: "Password"
        Label:
            id: sp
            size_hint_y: None
            height: 40
        Button:
            text: "Sign In"
            size_hint_y: None
            height: 40
            on_release: root.verify_credentials()

        Label:
            id: sp2



<AdminScreen>:
    name: "admin_screen"

    BoxLayout:
        id: main_win
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: (.91,.91,.91,1)
            Rectangle:
                size: self.size
                pos: self.pos
            
        BoxLayout:
            id: top_nav
            size_hint_y: None
            height: 30
            canvas.before:
                Color:
                    rgb: utils.get_color_from_hex('#062f4f')
                Rectangle:
                    size: self.size
                    pos: self.pos

            
            Label:
                text: 'Administrator Dashboard'
                bold: True
                size_hint: (.9, None)
                height: 30
                padding: 3,3
            FlatButton:
                id: file_trigger
                text: 'Logout'
                #text: 'File'
                #on_release: file_dropdown.open(self)
                size_hint: (.1, None)
                on_release: root.logout()
                height: 30
                canvas.before:
                    Color:
                        rgb: utils.get_color_from_hex('#031424')
                    Rectangle:
                        size: self.size
                        pos: self.pos
                #Widget:
                    #on_parent: file_dropdown.dismiss()
                    #DropDown:
                     #   id: file_dropdown
                        #Button:
                            #id: close
                            #text: 'quit'
                            #size_hint_y: None
                            #on_press: root.logout()
                            #height: 30
        BoxLayout:
            id: content_nav

            BoxLayout:
                id: nav_tabs
                size_hint_x: .2
                orientation: 'vertical'
                spacing: 5
                canvas.before:
                    Color:
                        rgb: utils.get_color_from_hex('#062f4f')
                    Rectangle:
                        size: self.size
                        pos: self.pos
                ToggleButton:
                    id: user_toggle
                    text: 'Manage Users'
                    size_hint_y: .1
                    state: 'down'
                    background_color: (0.024, 0.184, 0.31,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                ToggleButton:
                    id: products_toggle
                    text: 'Manage Accounts'
                    size_hint_y: .1
                    background_color: (0.024, 0.184, 0.31,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                ToggleButton:
                    id: analysis_toggle
                    text: 'Other Tab'
                    size_hint_y: .1
                    background_color: (0.024, 0.184, 0.31,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                Label:
                    id: sp
                    text: ''
                    size_hint_y: .7
            BoxLayout:
                id: all_content
                size_hint_x: .8
                padding: 20,10
                ScreenManager:
                    id: screen_manager
                    Screen:
                        id: screen_content
                        name: 'screen_content'
                        BoxLayout:
                            orientation: 'vertical'
                            spacing: 10
                            #BoxLayout:
                                #id: scrn_contents
                            Label:
                                text: 'List headers here'
                                spacing: 10
                                size_hint_y: None
                                height: 35
                                canvas.before:
                                    Color:
                                        rgba: (0.6,0.6,0.6,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                            Label:
                                text: 'List here'
                                canvas.before:
                                    Color:
                                        rgba: (0.70,0.70,0.70,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                            # BoxLayout:
                            #     id: ops_fields
                            #     spacing: 10
                            #     size_hint_y: None
                            #     height: 35
                            BoxLayout:
                                id: ops_btns
                                spacing: 10
                                size_hint_y: None
                                height: 45
                                Button:
                                    id: crud_add
                                    text: 'Add User'
                                    #on_release: root.add_user_fields()
                                    on_press: root.logout()
                                Button:
                                    id: crud_update
                                    text: 'Update User'
                                Button:
                                    id: crud_remove
                                    text: 'Remove User'
                    Screen:
                        id: screen_content_one
                        name: 'screen_content_one'
                        Label:
                            text: "screen TWO"
                    Screen:
                        id: screen_content_two
                        name: 'screen_content_two'
                        Label:
                            text: "screen THREE"

<TellerScreen>:
    name: "teller_screen"

    BoxLayout:
        id: main_win
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: (.91,.91,.91,1)
            Rectangle:
                size: self.size
                pos: self.pos
            
        BoxLayout:
            id: top_nav
            size_hint_y: None
            height: 30
            canvas.before:
                Color:
                    rgb: utils.get_color_from_hex('#680016')
                Rectangle:
                    size: self.size
                    pos: self.pos

            
            Label:
                text: 'Teller Dashboard'
                bold: True
                size_hint: (.9, None)
                height: 30
                padding: 3,3
            FlatButton:
                id: file_trigger
                text: 'Logout'
                #text: 'File'
                #on_release: file_dropdown.open(self)
                size_hint: (.1, None)
                on_release: root.logout()
                height: 30
                canvas.before:
                    Color:
                        #rgb: utils.get_color_from_hex('#031424')
                        rgba: (0.267, 0.027, 0.09, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                #Widget:
                    #on_parent: file_dropdown.dismiss()
                    #DropDown:
                     #   id: file_dropdown
                        #Button:
                            #id: close
                            #text: 'quit'
                            #size_hint_y: None
                            #on_press: root.logout()
                            #height: 30
        BoxLayout:
            id: content_nav

            BoxLayout:
                id: nav_tabs
                size_hint_x: .2
                orientation: 'vertical'
                spacing: 5
                canvas.before:
                    Color:
                        rgb: utils.get_color_from_hex('#680016')
                    Rectangle:
                        size: self.size
                        pos: self.pos
                ToggleButton:
                    id: user_toggle
                    text: 'Lookup Customer'
                    size_hint_y: .1
                    state: 'down'
                    background_color: (0.447, 0.047, 0.153,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                ToggleButton:
                    id: products_toggle
                    text: 'Transfers'
                    size_hint_y: .1
                    background_color: (0.447, 0.047, 0.153,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                ToggleButton:
                    id: analysis_toggle
                    text: 'Customer History'
                    size_hint_y: .1
                    background_color: (0.447, 0.047, 0.153,1)
                    background_normal: ''
                    group: 'admin_navs'
                    on_state: root.change_screen(self)
                Label:
                    id: sp
                    text: ''
                    size_hint_y: .7
            BoxLayout:
                id: all_content
                size_hint_x: .8
                padding: 20,10
                ScreenManager:
                    id: screen_manager
                    Screen:
                        id: customer_lookup_screen
                        name: 'customer_lookup_screen'
                        BoxLayout:
                            orientation: 'vertical'
                            spacing: 10
                            #BoxLayout:
                                #id: scrn_contents
                            BoxLayout:
                                orientation: 'horizontal'
                                spacing: 10
                                size_hint_y: None
                                height: 45
                                Label:
                                    text: ''
                                TextInput:
                                    id: lookup_ti
                                    hint_text: 'Customer Name'
                                    multiline: False
                                Button:
                                    id: search_customer_ti
                                    text: 'search'
                                
                            Label:
                                text: 'searchable list of all accounts'
                                spacing: 10
                                canvas.before:
                                    Color:
                                        rgba: (0.6,0.6,0.6,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                            # Button:
                            #     text: 'SEARCH'
                            #     canvas.before:
                            #         Color:
                            #             rgba: (0.70,0.70,0.70,1)
                            #         Rectangle:
                            #             size: self.size
                            #             pos: self.pos
                            # BoxLayout:
                            #     id: ops_fields
                            #     spacing: 10
                            #     size_hint_y: None
                            #     height: 35
                            BoxLayout:
                                id: ops_btns
                                spacing: 10
                                size_hint_y: None
                                height: 45
                                Label:
                                    text: ''
                                Label:
                                    text: ''
                                Button:
                                    id: crud_remove
                                    text: 'Select User'
                    Screen:
                        id: transfer_screen
                        name: 'transfer_screen'
                        BoxLayout:
                            id: transfer_bl
                            orientation: 'vertical'
                            spacing: 10
                            Label:
                                id: transfer_label
                                text: "Perform a transfer between customer accounts."
                                size_hint_y: None
                                height: 45
                                canvas.before:
                                    Color:
                                        rgba: (0.7,0.7,0.7,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                            BoxLayout:
                                orientation: 'vertical'
                                spacing: 15
                                padding: transfer_screen.x-75, 100
                                canvas.before:
                                    Color:
                                        rgba: (0.8,0.8,0.8,1)
                                    Rectangle:
                                        size: self.size
                                        pos: self.pos
                                Label:
                                    text: ''

                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: 'From Account: '
                                        size_hint_x: .4
                                        color: .2, .2, .2, 1
                                        # canvas.before:
                                        #     Color:
                                        #         rgba: (0.5,0.5,0.5,1)
                                        #     Rectangle:
                                        #         size: self.size
                                        #         pos: self.pos
                                    Spinner:
                                        text: 'Select Account'
                                        size_hint_x: .6
                                        values: ('Account 1', 'Account 2', 'Account 3')
                                        background_color: 0.447, 0.047, 0.153, 1
                                
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: 'To Account: '
                                        size_hint_x: .4
                                        color: .2, .2, .2, 1
                                        # canvas.before:
                                        #     Color:
                                        #         rgba: (0.5,0.5,0.5,1)
                                        #     Rectangle:
                                        #         size: self.size
                                        #         pos: self.pos
                                    Spinner:
                                        text: 'Select Account'
                                        size_hint_x: .6
                                        values: ('Account 1', 'Account 2', 'Account 3')
                                        background_color: 0.447, 0.047, 0.153, 1
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: 'Amount: '
                                        size_hint_x: .4
                                        color: .2, .2, .2, 1
                                        # canvas.before:
                                        #     Color:
                                        #         rgba: (0.5,0.5,0.5,1)
                                        #     Rectangle:
                                        #         size: self.size
                                        #         pos: self.pos
                                    TextInput:
                                        size_hint_x: .6
                                        hint_text: '$'
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 20
                                    size_hint_y: None
                                    height: 45
                                    Label:
                                        text: ''
                                        size_hint_x: .6
                                    Button:
                                        text: 'Continue' 
                                        size_hint_x: .4
                                Label:
                                    text: ''
                                

                    Screen:
                        id: customer_history_screen
                        name: 'customer_history_screen'
                        Label:
                            text: "screen THREE"
